@layer components {
  /* === BASE BUTTON STYLES === */
  .btn-primary,
  .btn-outline,
  .btn-secondary,
  .btn-ghost,
  .btn-white,
  .btn-dark {
    /* Base button structure */
    @apply inline-flex items-center justify-center gap-2;

    /* Figma exact typography */
    @apply font-[var(--font-family-display)] font-[var(--font-weight-button-sm)] text-[var(--font-size-button-sm)] leading-[var(--line-height-button-sm)] tracking-[var(--letter-spacing-button-sm)] uppercase no-underline;

    /* Figma exact dimensions (Node 1870:21501) */
    @apply h-7 px-6 rounded-[var(--radius-netinera-sm)] border-2 border-transparent; /* height: 28px, padding: 0 24px */
    
    /* Transitions */
    @apply transition-all duration-200 ease-in-out cursor-pointer; /* Assuming 'ease' means 'ease-in-out' */

    /* Focus states */
    @apply outline-none relative;
  }

  /* === PRIMARY BUTTON === */
  .btn-primary {
    @apply bg-[var(--color-netinera-secondary)] text-white border-[var(--color-netinera-secondary)];
  }

  .btn-primary:hover {
    @apply hover:bg-[#c4042a] hover:border-[#c4042a] hover:-translate-y-px;
  }

  .btn-primary:active {
    @apply active:bg-[#a10323] active:border-[#a10323] active:translate-y-0;
  }

  /* === OUTLINE BUTTON === */
  .btn-outline {
    @apply bg-transparent text-[var(--color-netinera-dark)] border-[var(--color-netinera-dark)] px-[22px];
    /* padding: 0 22px; to compensate for 2px border, base px-6 (24px) -> 22px */
  }

  .btn-outline:hover {
    @apply hover:bg-[var(--color-netinera-dark)] hover:text-white hover:-translate-y-px;
  }

  .btn-outline:active {
    @apply active:bg-[#0f1419] active:border-[#0f1419] active:translate-y-0;
  }

  /* === SECONDARY BUTTON === */
  .btn-secondary {
    @apply bg-[var(--color-netinera-primary)] text-white border-[var(--color-netinera-primary)];
  }

  .btn-secondary:hover {
    @apply hover:bg-[#005a52] hover:border-[#005a52] hover:-translate-y-px;
  }

  .btn-secondary:active {
    @apply active:bg-[#004a44] active:border-[#004a44] active:translate-y-0;
  }

  /* === GHOST BUTTON === */
  .btn-ghost {
    @apply bg-transparent text-[var(--color-netinera-dark)] border-transparent;
  }

  .btn-ghost:hover {
    @apply hover:bg-[var(--color-netinera-light)] hover:-translate-y-px;
  }

  .btn-ghost:active {
    @apply active:bg-stone-200 active:translate-y-0; /* #e7e5e4 is stone-200 */
  }

  /* === WHITE BUTTON === */
  .btn-white {
    @apply bg-white text-[var(--color-netinera-dark)] border-white;
  }

  .btn-white:hover {
    @apply hover:bg-[#f8f8f8] hover:border-[#f8f8f8] hover:-translate-y-px;
  }

  .btn-white:active {
    @apply active:bg-[#e8e8e8] active:border-[#e8e8e8] active:translate-y-0;
  }

  /* === DARK BUTTON === */
  .btn-dark {
    @apply bg-[var(--color-netinera-dark)] text-white border-[var(--color-netinera-dark)];
  }

  .btn-dark:hover {
    @apply hover:bg-[#0f1419] hover:border-[#0f1419] hover:-translate-y-px;
  }

  .btn-dark:active {
    @apply active:bg-black active:border-black active:translate-y-0;
  }

  /* === BUTTON SIZES === */
  .btn-size-sm {
    @apply h-6 px-4 text-xs;
  }

  .btn-size-sm.btn-outline {
    @apply px-[14px]; /* Original: 0 14px */
  }

  .btn-size-md {
    @apply h-8 px-6; /* Original: 0 24px */
  }

  .btn-size-md.btn-outline {
    @apply px-[22px]; /* Original: 0 22px */
  }

  .btn-size-lg {
    @apply h-10 px-8 text-base; /* Original: 0 32px, font-size 16px */
  }

  .btn-size-lg.btn-outline {
    @apply px-[30px]; /* Original: 0 30px */
  }

  .btn-size-xl {
    @apply h-12 px-10 text-lg; /* Original: 0 40px, font-size 18px */
  }

  .btn-size-xl.btn-outline {
    @apply px-[38px]; /* Original: 0 38px */
  }

  /* === BUTTON STATES === */
  .btn-primary:disabled,
  .btn-outline:disabled,
  .btn-secondary:disabled,
  .btn-ghost:disabled,
  .btn-white:disabled,
  .btn-dark:disabled {
    @apply disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none;
  }

  /* === FOCUS STATES - must come before disabled:hover === */
  .btn-primary:focus-visible,
  .btn-outline:focus-visible,
  .btn-secondary:focus-visible,
  .btn-ghost:focus-visible,
  .btn-white:focus-visible,
  .btn-dark:focus-visible {
    @apply focus-visible:outline-2 focus-visible:outline-[var(--color-netinera-primary)] focus-visible:outline-offset-2;
  }

  .btn-primary:disabled:hover,
  .btn-outline:disabled:hover,
  .btn-secondary:disabled:hover,
  .btn-ghost:disabled:hover,
  .btn-white:disabled:hover,
  .btn-dark:disabled:hover {
    @apply disabled:hover:transform-none; /* Ensures transform is none even if base hover had one */
  }

  /* === LOADING STATE === */
  .btn-loading {
    @apply relative text-transparent;
  }

  .btn-loading::after {
    content: '';
    @apply absolute w-4 h-4 border-2 border-transparent border-t-white rounded-full; /* Assuming spinner color is white */
    animation: btn-spin 1s linear infinite;
    /* currentcolor for border-top can be tricky if button text is transparent. Explicitly set. */
  }

  @keyframes btn-spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  /* === ICON BUTTONS === */
  .btn-icon {
    @apply inline-flex items-center justify-center;
  }

  .btn-icon svg { /* These are direct style attributes, not Tailwind classes */
    width: 16px;
    height: 16px;
    stroke-width: 1.25;
  }

  .btn-icon-only {
    @apply w-7 p-0; /* 28px */
  }

  .btn-icon-only.btn-size-sm {
    @apply w-6 h-6; /* 24px */
  }

  .btn-icon-only.btn-size-lg {
    @apply w-10 h-10; /* 40px */
  }

  .btn-icon-only.btn-size-xl {
    @apply w-12 h-12; /* 48px */
  }

  /* === FULL WIDTH BUTTON === */
  .btn-full {
    @apply w-full;
  }

  /* === TEXT LINK STYLES === */
  .text-link {
    @apply inline-flex items-center gap-1 font-[var(--font-family-sans)] font-[var(--font-weight-normal)] text-[var(--font-size-body-base)] leading-[var(--line-height-body-base)] underline underline-offset-4 text-[var(--color-netinera-primary)] transition-all duration-200 ease-in-out cursor-pointer;
  }

  .text-link:hover {
    @apply text-[#005a52] decoration-2; /* #005a52 is darker primary */
  }

  .text-link:active {
    @apply text-[#004a44]; /* Even darker primary */
  }

  .text-link:focus-visible {
    @apply outline-2 outline-[var(--color-netinera-primary)] outline-offset-2 rounded-sm;
  }

  /* === TEXT LINK VARIANTS === */
  .text-link-secondary {
    @apply text-[var(--color-netinera-secondary)];
  }

  .text-link-secondary:hover {
    @apply text-[#c4042a]; /* Darker secondary */
  }

  .text-link-secondary:active {
    @apply text-[#a10323]; /* Even darker secondary */
  }

  .text-link-light {
    @apply text-white;
  }

  .text-link-light:hover {
    @apply text-gray-200; /* Lighter white/gray */
  }

  .text-link-muted {
    @apply text-[var(--color-netinera-gray-medium)];
  }

  .text-link-muted:hover {
    @apply text-[var(--color-netinera-dark)];
  }

  /* === TEXT LINK SIZES === */
  .text-link-sm {
    @apply text-[var(--font-size-body-sm)] leading-[var(--line-height-body-sm)];
  }

  .text-link-lg {
    @apply text-[var(--font-size-body-lg)] leading-[var(--line-height-body-lg)];
  }

  /* === TEXT LINK ICONS === */
  .text-link-icon {
    @apply inline-flex items-center justify-center;
  }

  .text-link-icon svg { /* Direct style attributes */
    width: 16px;
    height: 16px;
    stroke-width: 1.25;
  }

  .text-link-sm .text-link-icon svg { /* Direct style attributes */
    width: 14px;
    height: 14px;
  }

  .text-link-lg .text-link-icon svg { /* Direct style attributes */
    width: 18px;
    height: 18px;
  }

  /* === EXTERNAL LINK INDICATOR === */
  .text-link-external::after {
    content: 'â†—'; /* Keep custom content */
    @apply text-[0.8em] ml-1 align-super;
  }

  /* === ACCESSIBILITY & RESPONSIVE === */
  @media (prefers-reduced-motion: reduce) {
    .btn-primary,
    .btn-outline,
    .btn-secondary,
    .btn-ghost,
    .btn-white,
    .btn-dark,
    .text-link {
      @apply motion-reduce:transition-none;
    }

    .btn-loading::after {
      @apply motion-reduce:animate-none;
    }
  }

  @media (width <= 767px) { /* Max width for netinera-mobile or sm */
    .btn-group-mobile-stack {
      @apply flex-col gap-2;
    }

    .btn-group-mobile-stack .btn-primary,
    .btn-group-mobile-stack .btn-outline,
    .btn-group-mobile-stack .btn-secondary {
      @apply w-full;
    }
  }
}
