/* === MAIN MENU */

.main-menu {
  position: relative;

  ol,
  ul,
  .ul,
  .ol {
    li {
      @apply mb-0 list-none;
    }
  }
}

.list-none {
  @apply list-none;
}

.main-menu .tracking-menu {
  letter-spacing: var(--tracking-menu, 0.1em);

  @apply no-underline text-sm;
}

/* Fix for body scrollbar jump */
html {
  /* Ensure scrollbar is always shown to prevent layout shifts */
  overflow-y: scroll;
}

/* Mobile Menu Styles */
body.menu-open,
body.search-open {
  /* Prevent scrolling but maintain position */
  @apply overflow-hidden;

  /* Prevent page jump by adding padding equal to scrollbar width */
  padding-right: var(--scrollbar-width, 17px);

  /* Lock position but allow scrollbar space */
  position: fixed;
  width: 100%;
  height: 100%;
}

/* Backdrop */
#menu-backdrop {
  opacity: 0;

  &.opacity-100 {
    opacity: initial;
  }
}

/* Mobile Menu Canvas */
#mobile-menu {
  @apply z-50 shadow-xl;

  border-top-left-radius: 3rem;

  &[aria-hidden="false"] {
    @apply translate-x-0;
  }

  li {
    list-style: none !important;
  }
}

/* Desktop submenu hover effect */
.main-menu .desktop-nav [class*='group-hover:block'] a {
  @apply transition-all duration-200;

  &:hover {
    @apply translate-x-2;
  }
}

/* Mobile Menu navigation styles */
#mobile-menu nav ul li a {
  @apply transform transition-all duration-200 ease-in-out no-underline;

  list-style: none !important;
}

/* Search input general styles */
#search-modal input[type="search"] {
  @apply transition-all duration-200;

  height: 50px;

  @apply pl-7 pr-12;

  border-radius: 9999px;
  transition: all 0.3s ease;

  @apply border-1 border-stone-400;

  background-color: #f9fafb;

  &::-webkit-search-cancel-button,
  &::-webkit-search-decoration,
  &::-webkit-search-results-button,
  &::-webkit-search-results-decoration {
    @apply hidden;

    appearance: none;
  }

  &::placeholder {
    @apply text-gray-500 font-medium;
  }

  &:focus {
    @apply outline-none border-transparent;
    @apply pl-7;

    /* Focus effect */
    @apply text-stone-800;
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent;
    @apply transition-all duration-200;
  }
}

/* Search Modal Backdrop with pseudo-element */
.search-modal-backdrop::after  {
  content: '';

  /* Ensure full viewport coverage */
  position: fixed !important;
  width: 100vw !important;
  height: 100vh !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  background-color: rgb(0 0 0 / 80%) !important;
}

/* Search Modal - Fully responsive modal overlay */
#search-modal {
  @apply opacity-0 pointer-events-none z-50 w-full h-full;

  transition:
    opacity 0.4s cubic-bezier(0.16, 1, 0.3, 1),
    visibility 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  will-change: opacity, transform, visibility;
  visibility: hidden;

  &[aria-hidden="false"] {
    @apply opacity-100 pointer-events-auto;

    visibility: visible;
  }

  /* Animation for the modal content */
  & > div {
    transform: translateY(-50px) scale(0.95);
    opacity: 0;
    position: relative;
    z-index: 2;
    transition:
      transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1),
      opacity 0.5s cubic-bezier(0.16, 1, 0.3, 1);
    will-change: transform, opacity;
  }

  &[aria-hidden="false"] > div {
    transform: translateY(0) scale(1);
    opacity: 1;
  }

  /* Close Button Styling */
  [data-search-close] {
    @apply w-[40px] h-[40px] flex justify-center items-center;

    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);

    &:hover {
      @apply bg-gray-100;

      transform: rotate(90deg);
    }
  }
}

/* Improved animations for search button icons */
[data-search-toggle] {
  .search-icon,
  .close-icon {
    transition:
      opacity 0.5s cubic-bezier(0.34, 1.56, 0.64, 1),
      transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    will-change: opacity, transform;
  }

  .search-icon {
    transform: rotate(0deg) scale(1);
    opacity: 1;
  }

  .close-icon {
    transform: rotate(-90deg) scale(0.8);
    opacity: 0;
    position: absolute;
  }

  &[aria-expanded="true"] {
    .search-icon {
      transform: rotate(90deg) scale(0.8);
      opacity: 0;
    }

    .close-icon {
      transform: rotate(0deg) scale(1);
      opacity: 1;
    }
  }
}
